<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åç¨‹ | nanarinote</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.6.0">
    <link rel="preload stylesheet" href="/nanarinonote/assets/style.B5iuMQIe.css" as="style">
    <link rel="preload stylesheet" href="/nanarinonote/vp-icons.css" as="style">
    
    <script type="module" src="/nanarinonote/assets/app.DHhvTul6.js"></script>
    <link rel="preload" href="/nanarinonote/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/framework.BNqTM2lr.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/theme.DEpNXzm-.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/katex.DCmpTppl.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/c4Diagram-3d4e48cf.B-4_7hRk.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/flowDiagram-66a62f08.D27V3tpk.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/flowDiagram-v2-96b9c2cf.2mES5Dad.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/erDiagram-9861fffd.Syq2zsPm.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/gitGraphDiagram-72cf32ee.CsOw8FTt.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/ganttDiagram-c361ad54.Co53pZBl.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/infoDiagram-f8f76790.D6DLuqTj.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/pieDiagram-8a3498a8.DYWpkPQ9.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/quadrantDiagram-120e2f19.BhuxizJi.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/xychartDiagram-e933f94c.CDSOHO6H.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/requirementDiagram-deff3bca.Cb0lhi_Q.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/sequenceDiagram-704730f1.CFyKA1SD.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/classDiagram-70f12bd4.BAV5DdZV.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/classDiagram-v2-f2320105.DS_N2Cv2.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/stateDiagram-587899a1.Dj52b7O7.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/stateDiagram-v2-d93cdb3a.Cscmuns3.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/journeyDiagram-49397b02.LIvEdAge.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/flowchart-elk-definition-4a651766.DsrzXMXC.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/timeline-definition-85554ec2.DhZgYu3L.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/mindmap-definition-fc14e90a.DddCXKlT.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/sankeyDiagram-04a897e0.D4vr8r-W.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/blockDiagram-38ab4fdb.C2SrHkGZ.js">
    <link rel="modulepreload" href="/nanarinonote/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/nanarinonote/assets/python_30-åç¨‹.md.BDvCp1j1.lean.js">
    <link rel="icon" href="/nanarinonote/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-737750a2><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c9ddcb4f></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c9ddcb4f>Skip to content</a><!--]--><!----><header class="VPNav" data-v-737750a2 data-v-e841f17a><div class="VPNavBar" data-v-e841f17a data-v-6d4364bc><div class="wrapper" data-v-6d4364bc><div class="container" data-v-6d4364bc><div class="title" data-v-6d4364bc><div class="VPNavBarTitle has-sidebar" data-v-6d4364bc data-v-6bd2a864><a class="title" href="/nanarinonote/" data-v-6bd2a864><!--[--><!--]--><!--[--><img class="VPImage logo" src="/nanarinonote/favicon.png" alt data-v-e0756c6f><!--]--><span data-v-6bd2a864>nanarinote</span><!--[--><!--]--></a></div></div><div class="content" data-v-6d4364bc><div class="content-body" data-v-6d4364bc><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6d4364bc><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6d4364bc data-v-51f7ee29><span id="main-nav-aria-label" class="visually-hidden" data-v-51f7ee29> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nanarinonote/javascript/" tabindex="0" data-v-51f7ee29 data-v-0effffc6><!--[--><span data-v-0effffc6>JavaScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/nanarinonote/python/" tabindex="0" data-v-51f7ee29 data-v-0effffc6><!--[--><span data-v-0effffc6>Python</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6d4364bc data-v-4f89bb5b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4f89bb5b data-v-c59adf63 data-v-04659e4b><span class="check" data-v-04659e4b><span class="icon" data-v-04659e4b><!--[--><span class="vpi-sun sun" data-v-c59adf63></span><span class="vpi-moon moon" data-v-c59adf63></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6d4364bc data-v-c176265d data-v-27070a13><!--[--><a class="VPSocialLink no-icon" href="https://github.com/nanarino" aria-label="github" target="_blank" rel="noopener" data-v-27070a13 data-v-494db7b4><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://twitter.com/kogawananari" aria-label="twitter" target="_blank" rel="noopener" data-v-27070a13 data-v-494db7b4><span class="vpi-social-twitter"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6d4364bc data-v-2c739375 data-v-2e53296e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-2e53296e><span class="vpi-more-horizontal icon" data-v-2e53296e></span></button><div class="menu" data-v-2e53296e><div class="VPMenu" data-v-2e53296e data-v-0d7468d5><!----><!--[--><!--[--><!----><div class="group" data-v-2c739375><div class="item appearance" data-v-2c739375><p class="label" data-v-2c739375>Appearance</p><div class="appearance-action" data-v-2c739375><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-2c739375 data-v-c59adf63 data-v-04659e4b><span class="check" data-v-04659e4b><span class="icon" data-v-04659e4b><!--[--><span class="vpi-sun sun" data-v-c59adf63></span><span class="vpi-moon moon" data-v-c59adf63></span><!--]--></span></span></button></div></div></div><div class="group" data-v-2c739375><div class="item social-links" data-v-2c739375><div class="VPSocialLinks social-links-list" data-v-2c739375 data-v-27070a13><!--[--><a class="VPSocialLink no-icon" href="https://github.com/nanarino" aria-label="github" target="_blank" rel="noopener" data-v-27070a13 data-v-494db7b4><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://twitter.com/kogawananari" aria-label="twitter" target="_blank" rel="noopener" data-v-27070a13 data-v-494db7b4><span class="vpi-social-twitter"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6d4364bc data-v-5e32bead><span class="container" data-v-5e32bead><span class="top" data-v-5e32bead></span><span class="middle" data-v-5e32bead></span><span class="bottom" data-v-5e32bead></span></span></button></div></div></div></div><div class="divider" data-v-6d4364bc><div class="divider-line" data-v-6d4364bc></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-737750a2 data-v-9c1b4c83><div class="container" data-v-9c1b4c83><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-9c1b4c83><span class="vpi-align-left menu-icon" data-v-9c1b4c83></span><span class="menu-text" data-v-9c1b4c83>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9c1b4c83 data-v-babb157a><button data-v-babb157a>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-737750a2 data-v-23e10130><div class="curtain" data-v-23e10130></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-23e10130><span class="visually-hidden" id="sidebar-aria-label" data-v-23e10130> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>èµ·æ­¥</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¶ï¹’å‡†å¤‡ç¯å¢ƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/1-%E5%88%9D%E8%AF%86python.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ï¹’åˆè¯†python</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/2-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ï¹’æµç¨‹æ§åˆ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¹ï¹’å¼‚å¸¸å¤„ç†</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>æ•°æ®ç±»å‹</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/4-%E6%95%B0%E5%AD%97%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸºï¹’æ•°å­—å’Œå­—ç¬¦ä¸²</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/5-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ»ï¹’åˆ—è¡¨å’Œå…ƒç»„</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/6-%E5%AD%97%E5%85%B8%E5%92%8C%E9%9B%86%E5%90%88.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¼ï¹’å­—å…¸å’Œé›†åˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ½ï¹’å­—ç¬¦ä¸²æ ¼å¼åŒ–</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/8-%E4%B8%89%E7%9B%AE%E5%92%8C%E6%8E%A8%E5%AF%BC%E5%BC%8F.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¾ï¹’ä¸‰ç›®å’Œæ¨å¯¼å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/9-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%8B%93%E5%B1%95.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¿ï¹’æ•°æ®ç±»å‹æ‹“å±•</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>å‡½æ•°</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/10-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¶ï¹’æ–‡ä»¶å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/11-%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ·ï¹’æ—¥å¿—å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/12-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¸ï¹’å†…ç½®å‡½æ•°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/13-%E9%97%AD%E5%8C%85%E5%92%8C%E8%A3%85%E9%A5%B0%E5%99%A8.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¹ï¹’é—­åŒ…å’Œè£…é¥°å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/14-%E9%80%92%E5%BD%92%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸºï¹’é€’å½’å’Œæ·±æ‹·è´</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/15-%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ»ï¹’è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>é¢å‘å¯¹è±¡</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/16-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¼ï¹’ç±»å’Œå¯¹è±¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/17-%E5%B0%81%E8%A3%85%E5%92%8C%E7%BB%A7%E6%89%BF.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ½ï¹’å°è£…å’Œç»§æ‰¿</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/18-%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¾ï¹’é­”æœ¯æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/19-%E5%A4%9A%E6%80%81%E5%92%8C%E6%B3%9B%E5%9E%8B.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ·ğŸ¿ï¹’å¤šæ€å’Œæ³›å‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/20-%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¶ï¹’æ¨¡å—å’ŒåŒ…</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>å¸¸ç”¨æ¨¡å—</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/21-%E5%8A%A0%E5%AF%86%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ·ï¹’åŠ å¯†æœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/22-%E5%BA%8F%E5%88%97%E5%8C%96%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¸ï¹’åºåˆ—åŒ–æœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/23-%E6%AD%A3%E5%88%99%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¹ï¹’æ­£åˆ™æœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/24-%E6%97%B6%E9%97%B4%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸºï¹’æ—¶é—´æœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/25-%E6%95%B0%E5%AD%A6%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ»ï¹’æ•°å­¦æœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0 has-active" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>å¹¶å‘ç¼–ç¨‹</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/26-%E7%B3%BB%E7%BB%9F%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¼ï¹’ç³»ç»Ÿæœ‰å…³æ¨¡å—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/27-%E5%A5%97%E6%8E%A5%E5%AD%97socket.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ½ï¹’å¥—æ¥å­—socket</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/28-%E8%BF%9B%E7%A8%8B.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¾ï¹’è¿›ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/29-%E7%BA%BF%E7%A8%8B.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¸ğŸ¿ï¹’çº¿ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/30-%E5%8D%8F%E7%A8%8B.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¹ğŸ¶ï¹’åç¨‹</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-aa124388><section class="VPSidebarItem level-0" data-v-aa124388 data-v-22115690><div class="item" role="button" tabindex="0" data-v-22115690><div class="indicator" data-v-22115690></div><h2 class="text" data-v-22115690>WEBç›¸å…³</h2><!----></div><div class="items" data-v-22115690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/31-SQL%E5%92%8CORM.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¹ğŸ·ï¹’SQLå’ŒORM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-22115690 data-v-22115690><div class="item" data-v-22115690><div class="indicator" data-v-22115690></div><a class="VPLink link link" href="/nanarinonote/python/32-FastAPI.html" data-v-22115690><!--[--><p class="text" data-v-22115690>ğŸ¹ğŸ¸ï¹’FastAPI</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-737750a2 data-v-d06e32f6><div class="VPDoc has-sidebar has-aside" data-v-d06e32f6 data-v-73547142><!--[--><!--]--><div class="container" data-v-73547142><div class="aside" data-v-73547142><div class="aside-curtain" data-v-73547142></div><div class="aside-container" data-v-73547142><div class="aside-content" data-v-73547142><div class="VPDocAside" data-v-73547142 data-v-be5d43ab><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-be5d43ab data-v-2dcbadf1><div class="content" data-v-2dcbadf1><div class="outline-marker" data-v-2dcbadf1></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-2dcbadf1>On this page</div><ul class="VPDocOutlineItem root" data-v-2dcbadf1 data-v-36f8815c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-be5d43ab></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-73547142><div class="content-container" data-v-73547142><!--[--><!--]--><main class="main" data-v-73547142><div style="position:relative;" class="vp-doc _nanarinonote_python_30-%E5%8D%8F%E7%A8%8B" data-v-73547142><div><h1 id="åç¨‹" tabindex="-1">åç¨‹ <a class="header-anchor" href="#åç¨‹" aria-label="Permalink to &quot;åç¨‹&quot;">â€‹</a></h1><p>åç¨‹æ˜¯å•çº¿ç¨‹ä¸‹ï¼Œç”¨æˆ·æ€çš„å¹¶å‘ã€‚è‹±æ–‡å Coroutineï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚<br> æ—©æœŸ Python é€šè¿‡<code>yield</code>ï¼Œ<code>.send()</code>æä¾›äº†å¯¹åç¨‹çš„åŸºæœ¬æ”¯æŒï¼Œä½†æ˜¯ä¸å®Œå…¨ã€‚<br> åœ¨ python ä¸­ï¼Œç”±äº GIL é”çš„å­˜åœ¨ï¼Œå¹¶å‘ç¼–ç¨‹çš„æœ€ä½³å®è·µæ˜¯<strong>å¤šè¿›ç¨‹</strong>+<strong>åç¨‹</strong>çš„æ–¹å¼ã€‚</p><h2 id="greenlet-æ¨¡å—" tabindex="-1">greenlet æ¨¡å— <a class="header-anchor" href="#greenlet-æ¨¡å—" aria-label="Permalink to &quot;greenlet æ¨¡å—&quot;">â€‹</a></h2><p>ç¬¬ä¸‰æ–¹æ¨¡å—<code>greenlet</code>å·²ç»å®ç°äº†åç¨‹ï¼Œæ— éœ€å†™ç”Ÿæˆå™¨ï¼Œ<code>.switch()</code>ä»£æ›¿äº†<code>.send()</code>ã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greenlet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greenlet</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eat 1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    g2.switch(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;egon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eat 2&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    g2.switch()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> play 1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    g1.switch()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> play 2&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greenlet(eat)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greenlet(play)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g1.switch(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;egon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯ä»¥åœ¨ç¬¬ä¸€æ¬¡switchæ—¶ä¼ å…¥å‚æ•°ï¼Œä»¥åéƒ½ä¸éœ€è¦</span></span></code></pre></div><h2 id="gevent-æ¨¡å—" tabindex="-1">gevent æ¨¡å— <a class="header-anchor" href="#gevent-æ¨¡å—" aria-label="Permalink to &quot;gevent æ¨¡å—&quot;">â€‹</a></h2><p>ç¬¬ä¸‰æ–¹åº“<code>gevent</code>å®ç°å¹¶å‘åŒæ­¥æˆ–å¼‚æ­¥ç¼–ç¨‹ï¼Œå†…éƒ¨ä»¥<code>greenlet</code>æ–¹å¼<strong>è‡ªåŠ¨è°ƒåº¦å®ƒè‡ªå·±çš„ IO</strong>ï¼Œå®ƒæ˜¯ä»¥ C æ‰©å±•æ¨¡å—å½¢å¼æ¥å…¥ Python çš„è½»é‡çº§åç¨‹ã€‚æ˜¯ python2 ç‰ˆæœ¬åç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚å®ƒçš„ API ä¸è¿›ç¨‹ï¼Œçº¿ç¨‹ç›¸è¿‘ã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gevent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gevent.spawn(func, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gevent.spawn(func2)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g1.join()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰å¾…g1ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g2.join()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰å¾…g2ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–è€…ä¸Šè¿°ä¸¤æ­¥åˆä½œä¸€æ­¥ï¼šgevent.joinall([g1,g2])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g1.value)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‹¿åˆ°func1çš„è¿”å›å€¼</span></span></code></pre></div><p>å®ƒè‡ªå·±çš„ IO æœ‰ï¼š<code>gevent.sleep()</code>ï¼Œ<code>gevent.socket</code>ç­‰</p><h3 id="çŒ´å­è¡¥ä¸" tabindex="-1">çŒ´å­è¡¥ä¸ <a class="header-anchor" href="#çŒ´å­è¡¥ä¸" aria-label="Permalink to &quot;çŒ´å­è¡¥ä¸&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gevent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spawn, joinall, monkey</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">monkey.patch_all()</span></span></code></pre></div><p>åœ¨å®ƒä¹‹åå¯¼å…¥çš„æ¨¡å—å°†è¢«æ›¿æ¢ä¸ºå®ƒè‡ªå·±çš„ ioï¼ŒåŠ¨æ€æ›¿æ¢å·²æœ‰çš„æ ‡å‡†åº“ã€‚</p><h2 id="å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“" tabindex="-1">å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“ <a class="header-anchor" href="#å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“" aria-label="Permalink to &quot;å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“&quot;">â€‹</a></h2><p><code>eventlet</code>ï¼šåŒ<code>gevent</code>æ¨¡å—ï¼Œå†…éƒ¨ä»¥<code>greenlet</code>æ–¹å¼ï¼Œä¹Ÿæœ‰çŒ´å­è¡¥ä¸æ–¹æ³•ï¼Œä½†æ²¡<code>gevent</code>å¥½ç”¨ã€‚<br><code>twisted</code>ï¼šåŸºäºäº‹ä»¶é©±åŠ¨çš„ç½‘ç»œå¼•æ“æ¡†æ¶ã€‚<br><code>tornado</code>ï¼šæœ€ç®€å•çš„å›è°ƒå®ç°å¼‚æ­¥åç¨‹ï¼Œä½œä¸º httpserver å’Œ httpclientï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Web æ¡†æ¶ã€‚</p><h2 id="asyncio-æ¨¡å—" tabindex="-1">asyncio æ¨¡å— <a class="header-anchor" href="#asyncio-æ¨¡å—" aria-label="Permalink to &quot;asyncio æ¨¡å—&quot;">â€‹</a></h2><p><a href="https://docs.python.org/zh-cn/3/library/asyncio.html" target="_blank" rel="noreferrer"><code>asyncio</code></a>æ˜¯ Python 3.4 ç‰ˆæœ¬å¼•å…¥çš„æ ‡å‡†åº“ï¼Œç›´æ¥å†…ç½®äº†å¯¹å¼‚æ­¥ IO çš„æ”¯æŒã€‚</p><p><strong>å¯ç­‰å¾…å¯¹è±¡</strong>(ä»¥ä¸‹ç®€å†™ä¸º<strong>aw</strong>)ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>coroï¼šcoroutine åç¨‹å¯¹è±¡ï¼Œ<code>async</code>å…³é”®å­—å®šä¹‰çš„å‡½æ•°è¿”å›çš„å¯¹è±¡</li><li>taskï¼šä»»åŠ¡å¯¹è±¡ï¼ŒåŒ…å«åç¨‹å¯¹è±¡çš„å„ç§çŠ¶æ€</li><li>futureï¼štask çš„çˆ¶ç±»ï¼Œç»™äºˆé«˜å±‚å»ç­‰å¾… ç±»ä¼¼äº js çš„ promise</li></ul><p>æ³¨æ„ <code>asyncio.Future</code> åªæ˜¯æ¨¡ä»¿ <code>concurrent.futures.Future</code> ã€‚æ–¹æ³•å¹¶ä¸å®Œå…¨ä¸€æ ·</p><p><strong>ç®€å•è¿è¡Œå’Œä¼‘çœ äº‹ä»¶å¾ªç¯</strong></p><ul><li><code>asyncio.run(aw)</code> åˆ›å»ºå’Œè¿è¡Œå½“å‰çº¿ç¨‹çš„ loop</li><li><code>asyncio.sleep(ç§’æ•°)</code> æ¨¡æ‹Ÿ io è€—æ—¶</li></ul><h3 id="åˆ›å»ºäº‹ä»¶å¾ªç¯" tabindex="-1">åˆ›å»ºäº‹ä»¶å¾ªç¯ <a class="header-anchor" href="#åˆ›å»ºäº‹ä»¶å¾ªç¯" aria-label="Permalink to &quot;åˆ›å»ºäº‹ä»¶å¾ªç¯&quot;">â€‹</a></h3><h4 id="æœ€ç®€å•çš„è¿è¡Œ" tabindex="-1">æœ€ç®€å•çš„è¿è¡Œ <a class="header-anchor" href="#æœ€ç®€å•çš„è¿è¡Œ" aria-label="Permalink to &quot;æœ€ç®€å•çš„è¿è¡Œ&quot;">â€‹</a></h4><p><code>asyncio.run(aw)</code></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> say</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(delay, what):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(delay)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(what)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> say(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> say(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">asyncio.run(main())</span></span></code></pre></div><p>å®ƒå°†ä¼šæ‰“å° &quot;start&quot;ï¼Œ<br> ç­‰å¾… 1 ç§’ï¼Œå†æ‰“å° &quot;hello&quot;<br> ç­‰å¾… 2 ç§’ï¼Œå†æ‰“å° &quot;world&quot;</p><p>ç”±äºæ²¡æœ‰æ³¨å†Œä¸º Task å¯¹è±¡ await coro()ä»£ç ä¾ç„¶æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œ</p><p>å®é™…ä¸Šæ˜¯<strong>ç»§å‘æ‰§è¡Œäº†ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡</strong></p><p><code>asyncio.run(aw)</code>æ˜¯ python3.7 ä»¥ä¸Šçš„å†™æ³•<br> ä»¥å‰çš„å†™æ³•å¦‚ä¸‹ï¼Œåªèƒ½å…ˆåˆ›å»º loop å¯¹è±¡å†ä½¿ç”¨ loop ä¸Šçš„æ–¹æ³•ã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.get_event_loop()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loop.run_until_complete(main())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loop.close()</span></span></code></pre></div><h4 id="å…¶ä»–æ–¹æ³•åˆ›å»º-è·å–å’Œè®¾ç½®äº‹ä»¶å¾ªç¯" tabindex="-1">å…¶ä»–æ–¹æ³•åˆ›å»ºï¼Œè·å–å’Œè®¾ç½®äº‹ä»¶å¾ªç¯ <a class="header-anchor" href="#å…¶ä»–æ–¹æ³•åˆ›å»º-è·å–å’Œè®¾ç½®äº‹ä»¶å¾ªç¯" aria-label="Permalink to &quot;å…¶ä»–æ–¹æ³•åˆ›å»ºï¼Œè·å–å’Œè®¾ç½®äº‹ä»¶å¾ªç¯&quot;">â€‹</a></h4><ul><li><code>asyncio.get_running_loop()</code></li><li><code>asyncio.get_event_loop()</code> è·å–å½“å‰ä¸Šä¸‹æ–‡çš„äº‹ä»¶å¾ªç¯</li><li><code>asyncio.set_event_loop(loop)</code></li><li><code>asyncio.new_event_loop()</code> ä¸€èˆ¬æ˜¯ç»™æ–°çº¿ç¨‹ä½¿ç”¨ï¼Œè§ä¸‹</li></ul><h3 id="åˆ›å»º-future-æˆ–-task" tabindex="-1">åˆ›å»º Future æˆ– Task <a class="header-anchor" href="#åˆ›å»º-future-æˆ–-task" aria-label="Permalink to &quot;åˆ›å»º Future æˆ– Task&quot;">â€‹</a></h3><h4 id="asyncio-create-task-aw" tabindex="-1"><code>asyncio.create_task(aw)</code> <a class="header-anchor" href="#asyncio-create-task-aw" aria-label="Permalink to &quot;`asyncio.create_task(aw)`&quot;">â€‹</a></h4><p>æœ€ç®€å•çš„æ³¨å†Œ coro ä¸º Task å¯¹è±¡çš„æ–¹æ³•</p><p>å°†åç¨‹å¯¹è±¡åŠå…¶å„ç§çŠ¶æ€æ‰“åŒ…æ³¨å†Œä¸º Task å¯¹è±¡ï¼Œæ”¾å…¥ asyncio.all_tasks çš„é›†åˆï¼ˆå¯ä»¥çœ‹æˆä»»åŠ¡é˜Ÿåˆ—ï¼Œå…ˆæ”¾è¿›å»çš„åœ¨å‰é¢ï¼Œä½†æ˜¯ main åœ¨æœ€åé¢ï¼‰ä¸­ï¼Œå¹¶è¿”å›ã€‚</p><p><code>asyncio.create_task()</code>æ˜¯ python3.7 ä»¥ä¸Šçš„å†™æ³•ï¼Œä»¥å‰åªèƒ½ç”¨<code>asyncio.ensure_future()</code>å’Œ<code>loop.create_task()</code></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›¿ä»£ä¸Šæ–‡çš„main</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    task1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.create_task(say(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    task2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.create_task(say(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> task1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> task2</span></span></code></pre></div><p>å®ƒå°†ä¼šç­‰å¾… 1 ç§’ï¼Œæ‰“å° &quot;hello&quot; ï¼›ç­‰å¾… 1 ç§’ï¼Œå†æ‰“å° &quot;world&quot;<br> è‡³æ­¤ï¼Œ<strong>å¹¶å‘è¿è¡Œäº†ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡</strong>ï¼Œasyncio.all_tasks çš„é›†åˆè¢«æ¸…ç©ºäº†ã€‚</p><div class="warning custom-block"><p class="custom-block-title">await task</p><p>å¿…é¡»å…¨éƒ¨æ³¨å†Œä¸º task ä¹‹åå† awaitï¼Œå¦åˆ™ asyncio.all_tasks é‡Œé™¤äº† main å§‹ç»ˆåªæœ‰ä¸€ä¸ª taskï¼Œå¯ä»¥é¢„è§ä¾ç„¶æ˜¯ç»§å‘æ‰§è¡Œçš„</p></div><h4 id="asyncio-gather-aws" tabindex="-1"><code>asyncio.gather(*aws)</code> <a class="header-anchor" href="#asyncio-gather-aws" aria-label="Permalink to &quot;`asyncio.gather(*aws)`&quot;">â€‹</a></h4><p>å¤šä¸ª task æˆ–è€… coro æ•´åˆä¸ºä¸€ä¸ª task</p><p>æœ‰è¿”å›å€¼æ—¶ï¼Œå¯è·å¾—é¡ºåºåŒ aws çš„è¿”å›å€¼åˆ—è¡¨</p><h4 id="asyncio-as-completed-aws" tabindex="-1"><code>asyncio.as_completed(aws)</code> <a class="header-anchor" href="#asyncio-as-completed-aws" aria-label="Permalink to &quot;`asyncio.as_completed(aws)`&quot;">â€‹</a></h4><p>è¿”å›ä¸€ä¸ª task è¿­ä»£å™¨</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [count(i) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.as_completed(tasks):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> task</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">asyncio.run(main())</span></span></code></pre></div><h3 id="ä¸Šä¸‹æ–‡ç®¡ç†" tabindex="-1">ä¸Šä¸‹æ–‡ç®¡ç† <a class="header-anchor" href="#ä¸Šä¸‹æ–‡ç®¡ç†" aria-label="Permalink to &quot;ä¸Šä¸‹æ–‡ç®¡ç†&quot;">â€‹</a></h3><p>å®ç°äº†<code>__aenter__</code> å’Œ<code>__aexit__</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ª awaitable ç±»å‹çš„å€¼ã€‚</p><p>å’Œå¸¸è§„çš„ <code>with</code> è¡¨è¾¾å¼ä¸€æ ·ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª <code>async with</code> è¡¨è¾¾å¼ä¸­æŒ‡å®šå¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ python asyncio çš„å…¶ä»–ç”Ÿæ€ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aiohttp  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸‰æ–¹åº“ å¼‚æ­¥ç½‘ç»œè¯·æ±‚</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, head):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aiohttp.ClientSession() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.get(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">head) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            page_html </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.text()</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aiofiles  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¬¬ä¸‰æ–¹åº“ å¼‚æ­¥æ–‡ä»¶æ“ä½œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aiofiles.open(filename, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">encoding) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span></code></pre></div><p>ä¸Šä¾‹ä¸­ async for ç”¨æ¥å¾ªç¯å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡ï¼Œå…¶<code>.__aiter__()</code>è¿”å›çš„å¼‚æ­¥è¿­ä»£å™¨éœ€è¦å®ç°<code>__anext__</code>æ–¹æ³•</p><h3 id="loop-å¯¹è±¡æ–¹æ³•" tabindex="-1">loop å¯¹è±¡æ–¹æ³• <a class="header-anchor" href="#loop-å¯¹è±¡æ–¹æ³•" aria-label="Permalink to &quot;loop å¯¹è±¡æ–¹æ³•&quot;">â€‹</a></h3><p>è®°å¾—æŠŠ loop å¯¹è±¡ä¼ è¿› main ä¸­ä»¥ä¾¿æ“ä½œ loop æ–¹æ³•</p><ul><li><code>loop.run_until_complete(future)</code>ã€‚è¿è¡Œäº‹ä»¶å¾ªç¯ï¼Œç›´åˆ° future è¿è¡Œç»“æŸ</li><li><code>loop.run_forever()</code> è¡¨ç¤ºäº‹ä»¶å¾ªç¯ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°é‡åˆ° stopã€‚</li><li><code>loop.stop()</code>ã€‚åœæ­¢äº‹ä»¶å¾ªç¯</li><li><code>loop.is_running()</code>ã€‚å¦‚æœäº‹ä»¶å¾ªç¯ä¾ç„¶åœ¨è¿è¡Œï¼Œåˆ™è¿”å› True</li><li><code>loop.is_closed()</code>ã€‚å¦‚æœäº‹ä»¶å¾ªç¯å·²ç» closeï¼Œåˆ™è¿”å› True</li><li><code>loop.close()</code>ã€‚å…³é—­äº‹ä»¶å¾ªç¯</li><li><code>loop.time()</code>ã€‚äº‹ä»¶å¾ªç¯çš„æ—¶é’Ÿ</li><li><code>loop.create_future(coro)</code> ï¼Œè¿”å› future å¯¹è±¡</li><li><code>loop.create_task(coro)</code> ï¼Œè¿”å› task å¯¹è±¡</li><li><code>loop.run_in_executor(executor, work)</code> è¿æ¥çº¿ç¨‹æ± å®ç°åŒæ­¥ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ executor æ˜¯ <code>concurrent.futures.ThreadPoolExecutor</code> çš„å®ä¾‹å¯¹è±¡</li><li>callbackï¼ˆåªæ¥å—ä½ç½®å‚æ•°ï¼Œä¸”ä¸æ˜¯ coro æ˜¯æ™®é€šå‡½æ•°ï¼‰ <ul><li><code>loop.call_later(delay, callback, *args, context=None)</code> å»¶è¿Ÿå›è°ƒ</li><li><code>loop.call_at(when, callback, *args, context=None)</code> æ—¶åˆ»ç‚¹å›è°ƒ ç»“åˆ <code>loop.time()</code> ä½¿ç”¨</li><li><code>loop.call_soon(callback, *args, context=None)</code> ä¸‹ä¸€ä¸ªå¾ªç¯ç«‹å³å›è°ƒ</li><li><code>loop.call_soon_threadsafe(callback, *args, context=None)</code> ä¸‹ä¸€ä¸ªå¾ªç¯ç«‹å³å›è°ƒï¼Œå¿…é¡»åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨</li></ul></li></ul><p>å¯ä»¥åœ¨æ–°çº¿ç¨‹ä¸­ä½¿ç”¨ <code>loop.run_forever()</code> ä½¿å…¶<strong>æ°¸è¿œç­‰å¾…ä¸»çº¿ç¨‹å‘å…¶å‘å°„ task</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio, aiohttp, re</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">header </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;user-agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36 Edg/91.0.864.67&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> start_loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loop):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    asyncio.set_event_loop(loop)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loop.run_forever()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> end_loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.get_event_loop()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loop.stop()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aiohttp.ClientSession() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.get(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">header) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                page_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.text()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re.search(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(?&lt;=</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">title</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*?(?=</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">/title</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, page_text):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: è§£æç½‘é¡µæ ‡é¢˜ä¸º </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">title.group()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: è§£æä¸åˆ°ç½‘é¡µæ ‡é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">new_loop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.new_event_loop()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">start_loop, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(new_loop,))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t.start()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    new_loop.call_soon(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥å®Œæ•´urlå¦‚https://t.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ipt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;q&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        asyncio.run_coroutine_threadsafe(end_loop(), new_loop)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        asyncio.run_coroutine_threadsafe(get_title(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()), new_loop)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t.join()</span></span></code></pre></div><p>ä¸Šä¾‹ä¸­ä¸»çº¿ç¨‹ä¸€ç›´ç­‰å¾…ç€ç”¨æˆ·è¾“å…¥ã€‚ç”¨æˆ·è¾“å…¥åç«‹å³ç”Ÿæˆ aw æŠ›ç»™å­çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ã€‚</p><h3 id="task-å¯¹è±¡æ–¹æ³•" tabindex="-1">task å¯¹è±¡æ–¹æ³• <a class="header-anchor" href="#task-å¯¹è±¡æ–¹æ³•" aria-label="Permalink to &quot;task å¯¹è±¡æ–¹æ³•&quot;">â€‹</a></h3><ul><li><code>.get_coro()</code> è·å–å®ƒæ˜¯ç”±å“ªä¸ªåç¨‹å¯¹è±¡æ³¨å†Œä¸ºä»»åŠ¡çš„</li><li><code>.cancel()</code> å–æ¶ˆä»»åŠ¡</li><li><code>.result()</code> è·å–è¿”å›</li><li><code>.add_done_callback()</code> æ·»åŠ å®Œæˆæ—¶å›è°ƒ</li></ul><h3 id="task-è§„åˆ’" tabindex="-1">task è§„åˆ’ <a class="header-anchor" href="#task-è§„åˆ’" aria-label="Permalink to &quot;task è§„åˆ’&quot;">â€‹</a></h3><ul><li><code>asyncio.wait_for(aw, timeout)</code> è¶…æ—¶æŠ›å‡ºå¼‚å¸¸</li><li><code>asyncio.wait(tasks, return_when)</code> é˜»å¡ç­‰å¾…æ‰€ä¼  tasks æ‰§è¡Œå®Œæ¯• æ‰§è¡Œå®Œæ¯•å¯è®¾ç½®ä¸ºä»»ä¸€å®Œæ¯• ä»»ä¸€å¼‚å¸¸ å…¨éƒ¨å®Œæ¯•</li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [count(i) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    done, pending </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.wait(tasks)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> done:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i.result())</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">asyncio.run(main())</span></span></code></pre></div><p>return_when æŒ‡å®šæ­¤å‡½æ•°åº”åœ¨ä½•æ—¶è¿”å›ã€‚å®ƒå¿…é¡»ä¸ºä»¥ä¸‹å¸¸æ•°ä¹‹ä¸€:</p><table tabindex="0"><thead><tr><th style="text-align:left;">å¸¸æ•°</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><code>FIRST_COMPLETED</code></td><td style="text-align:left;">ä»»ä¸€å®Œæ¯•</td></tr><tr><td style="text-align:left;"><code>FIRST_EXCEPTION</code></td><td style="text-align:left;">ä»»ä¸€å¼‚å¸¸ã€‚å½“æ²¡æœ‰å¼•å‘ä»»ä½•å¼‚å¸¸æ—¶å®ƒå°±ç›¸å½“äº <code>ALL_COMPLETED</code>ã€‚</td></tr><tr><td style="text-align:left;"><code>ALL_COMPLETED</code></td><td style="text-align:left;">é»˜è®¤ã€‚å…¨éƒ¨å®Œæ¯•</td></tr></tbody></table><p>ä¸ <code>wait_for()</code>ï¼Œ<code>wait()</code> åœ¨è¶…æ—¶å‘ç”Ÿæ—¶ä¸ä¼šå–æ¶ˆå¯ç­‰å¾…å¯¹è±¡ã€‚</p><h4 id="asyncio-all-tasks" tabindex="-1"><code>asyncio.all_tasks()</code> <a class="header-anchor" href="#asyncio-all-tasks" aria-label="Permalink to &quot;`asyncio.all_tasks()`&quot;">â€‹</a></h4><p>è¿”å›äº‹ä»¶å¾ªç¯æ‰€è¿è¡Œçš„æœªå®Œæˆçš„ Task å¯¹è±¡çš„é›†åˆ</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.all_tasks():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(task.cancel())</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-73547142 data-v-6798f4be><!--[--><!--]--><div class="edit-info" data-v-6798f4be><!----><div class="last-updated" data-v-6798f4be><p class="VPLastUpdated" data-v-6798f4be data-v-480004b0>Last updated: <time datetime="2024-12-19T14:45:41.000Z" data-v-480004b0></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-6798f4be><span class="visually-hidden" id="doc-footer-aria-label" data-v-6798f4be>Pager</span><div class="pager" data-v-6798f4be><a class="VPLink link pager-link prev" href="/nanarinonote/python/29-%E7%BA%BF%E7%A8%8B.html" data-v-6798f4be><!--[--><span class="desc" data-v-6798f4be>Previous page</span><span class="title" data-v-6798f4be>ğŸ¸ğŸ¿ï¹’çº¿ç¨‹</span><!--]--></a></div><div class="pager" data-v-6798f4be><a class="VPLink link pager-link next" href="/nanarinonote/python/31-SQL%E5%92%8CORM.html" data-v-6798f4be><!--[--><span class="desc" data-v-6798f4be>Next page</span><span class="title" data-v-6798f4be>ğŸ¹ğŸ·ï¹’SQLå’ŒORM</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"CTZ9TlSU\",\"javascript_1-åˆè¯†javascript.md\":\"CRiNPint\",\"javascript_10-å‡½æ•°çš„é«˜çº§ç”¨æ³•.md\":\"C2kgeOJi\",\"javascript_11-å­—ç¬¦ä¸²å’Œæ•°ç»„.md\":\"B7f4oxJt\",\"javascript_12-è§£æ„èµ‹å€¼å’Œåºåˆ—åŒ–.md\":\"DuAEyyKm\",\"javascript_13-æ•°å­¦å’Œæ—¥æœŸå¯¹è±¡.md\":\"Dc7B8ziH\",\"javascript_14-å¯¹è±¡æ–¹æ³•æ‰©å±•.md\":\"BMkbKHq-\",\"javascript_15-æ­£åˆ™å¯¹è±¡.md\":\"C1YFVYJk\",\"javascript_16-é¢å‘å¯¹è±¡.md\":\"BvGhHRKP\",\"javascript_17-æ–°å¢æ•°æ®ç±»å‹.md\":\"Cpj_7EHJ\",\"javascript_18-æè¿°ç¬¦å’Œä»£ç†ç±».md\":\"Br4mLsLQ\",\"javascript_19-tsä»¥åŠå®éªŒæ€§è¯­æ³•.md\":\"BtbwB3Hw\",\"javascript_2-æ•°æ®ç±»å‹ä¼Šå§‹.md\":\"DkYLD6fS\",\"javascript_20-æƒ°æ€§å‡½æ•°å’Œpromise.md\":\"BozwJA5n\",\"javascript_21-asyncå’Œawait.md\":\"DBF-huqW\",\"javascript_22-domå¯¹è±¡.md\":\"AHHk0KNt\",\"javascript_23-domäº‹ä»¶.md\":\"rf0uRLIZ\",\"javascript_24-bomç›¸å…³.md\":\"BYQhiNYg\",\"javascript_25-å¸¸ç”¨webapi.md\":\"GqMTjH5S\",\"javascript_26-å‰åç«¯äº¤äº’.md\":\"B2KVtw1b\",\"javascript_27-nodejs.md\":\"Cxnd3b-I\",\"javascript_28-mongodb.md\":\"DazondFZ\",\"javascript_29-koa2.md\":\"bQOUebbg\",\"javascript_3-å‡½æ•°å’Œå¯¹è±¡å±æ€§.md\":\"CSfWVQqw\",\"javascript_30-æ„å»ºå·¥å…·.md\":\"CckNjJNO\",\"javascript_31-å®¢æˆ·ç«¯æ„å»º.md\":\"CHgLS-Xv\",\"javascript_4-æµç¨‹æ§åˆ¶.md\":\"wUKa-iic\",\"javascript_5-è¿ç®—ç¬¦å’Œç±»å‹è½¬æ¢.md\":\"Dnzd1F7t\",\"javascript_6-ä½œç”¨åŸŸå’Œé—­åŒ….md\":\"CZjW63gt\",\"javascript_7-jså˜é‡æå‡.md\":\"Dc_7ZX61\",\"javascript_8-å‡½æ•°çš„åŸºæœ¬ç”¨æ³•.md\":\"lo_l6JQ-\",\"javascript_9-å®šæ—¶å™¨ä¸å¼‚æ­¥.md\":\"BfreHAlv\",\"javascript_index.md\":\"DCe41pWI\",\"python_1-åˆè¯†python.md\":\"D7jwarGj\",\"python_10-æ–‡ä»¶å¤„ç†.md\":\"B6pC9Bbr\",\"python_11-æ—¥å¿—å¤„ç†.md\":\"VzvIfiR8\",\"python_12-å†…ç½®å‡½æ•°.md\":\"B5k1EB4g\",\"python_13-é—­åŒ…å’Œè£…é¥°å™¨.md\":\"2SunR1ti\",\"python_14-é€’å½’å’Œæ·±æ‹·è´.md\":\"CHZg85nn\",\"python_15-è¿­ä»£å™¨å’Œç”Ÿæˆå™¨.md\":\"BCgPP7c4\",\"python_16-ç±»å’Œå¯¹è±¡.md\":\"Bts8646h\",\"python_17-å°è£…å’Œç»§æ‰¿.md\":\"B7USq5y_\",\"python_18-é­”æœ¯æ–¹æ³•.md\":\"B3RD-lvY\",\"python_19-å¤šæ€å’Œæ³›å‹.md\":\"DDQIEHcH\",\"python_2-æµç¨‹æ§åˆ¶.md\":\"Bc6xQzLh\",\"python_20-æ¨¡å—å’ŒåŒ….md\":\"DyKuTIkt\",\"python_21-åŠ å¯†æœ‰å…³æ¨¡å—.md\":\"Dd2h3i33\",\"python_22-åºåˆ—åŒ–æœ‰å…³æ¨¡å—.md\":\"BP8BKocg\",\"python_23-æ­£åˆ™æœ‰å…³æ¨¡å—.md\":\"bOz3UwUV\",\"python_24-æ—¶é—´æœ‰å…³æ¨¡å—.md\":\"DTGkJ5il\",\"python_25-æ•°å­¦æœ‰å…³æ¨¡å—.md\":\"Ba24NjKL\",\"python_26-ç³»ç»Ÿæœ‰å…³æ¨¡å—.md\":\"CQKrRlNx\",\"python_27-å¥—æ¥å­—socket.md\":\"BB6mGjTs\",\"python_28-è¿›ç¨‹.md\":\"CWCJPvC7\",\"python_29-çº¿ç¨‹.md\":\"uB2VGwum\",\"python_3-å¼‚å¸¸å¤„ç†.md\":\"Yi7g0KxV\",\"python_30-åç¨‹.md\":\"BDvCp1j1\",\"python_31-sqlå’Œorm.md\":\"BI5MIoUs\",\"python_32-fastapi.md\":\"DY6bM4DV\",\"python_4-æ•°å­—å’Œå­—ç¬¦ä¸².md\":\"9N6ht6_J\",\"python_5-åˆ—è¡¨å’Œå…ƒç»„.md\":\"Dvan_TE7\",\"python_6-å­—å…¸å’Œé›†åˆ.md\":\"BeGKCFdv\",\"python_7-å­—ç¬¦ä¸²æ ¼å¼åŒ–.md\":\"BUOJIj6N\",\"python_8-ä¸‰ç›®å’Œæ¨å¯¼å¼.md\":\"CcIaDQJU\",\"python_9-æ•°æ®ç±»å‹æ‹“å±•.md\":\"Dxt_cXep\",\"python_index.md\":\"BSxE1HWg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"nanarinote\",\"description\":\"A VitePress site\",\"base\":\"/nanarinonote/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.png\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/nanarino\"},{\"icon\":\"twitter\",\"link\":\"https://twitter.com/kogawananari\"}],\"nav\":[{\"text\":\"JavaScript\",\"link\":\"/javascript/\",\"activeMatch\":\"/javascript/\"},{\"text\":\"Python\",\"link\":\"/python/\",\"activeMatch\":\"/python/\"}],\"sidebar\":{\"/javascript/\":[{\"text\":\"èµ·æ­¥\",\"items\":[{\"text\":\"ğŸ¶ï¹’å‡†å¤‡ç¯å¢ƒ\",\"link\":\"/javascript/\"},{\"text\":\"ğŸ·ï¹’åˆè¯†javascript\",\"link\":\"/javascript/1-åˆè¯†javascript\"},{\"text\":\"ğŸ¸ï¹’æ•°æ®ç±»å‹ä¼Šå§‹\",\"link\":\"/javascript/2-æ•°æ®ç±»å‹ä¼Šå§‹\"},{\"text\":\"ğŸ¹ï¹’å‡½æ•°å’Œå¯¹è±¡å±æ€§\",\"link\":\"/javascript/3-å‡½æ•°å’Œå¯¹è±¡å±æ€§\"},{\"text\":\"ğŸºï¹’æµç¨‹æ§åˆ¶\",\"link\":\"/javascript/4-æµç¨‹æ§åˆ¶\"},{\"text\":\"ğŸ»ï¹’è¿ç®—ç¬¦å’Œç±»å‹è½¬æ¢\",\"link\":\"/javascript/5-è¿ç®—ç¬¦å’Œç±»å‹è½¬æ¢\"}]},{\"text\":\"å‡½æ•°å’Œä½œç”¨åŸŸ\",\"items\":[{\"text\":\"ğŸ¼ï¹’ä½œç”¨åŸŸå’Œé—­åŒ…\",\"link\":\"/javascript/6-ä½œç”¨åŸŸå’Œé—­åŒ…\"},{\"text\":\"ğŸ½ï¹’jså˜é‡æå‡\",\"link\":\"/javascript/7-jså˜é‡æå‡\"},{\"text\":\"ğŸ¾ï¹’å‡½æ•°çš„åŸºæœ¬ç”¨æ³•\",\"link\":\"/javascript/8-å‡½æ•°çš„åŸºæœ¬ç”¨æ³•\"},{\"text\":\"ğŸ¿ï¹’å®šæ—¶å™¨ä¸å¼‚æ­¥\",\"link\":\"/javascript/9-å®šæ—¶å™¨ä¸å¼‚æ­¥\"},{\"text\":\"ğŸ·ğŸ¶ï¹’å‡½æ•°çš„é«˜çº§ç”¨æ³•\",\"link\":\"/javascript/10-å‡½æ•°çš„é«˜çº§ç”¨æ³•\"}]},{\"text\":\"å¯¹è±¡å’Œæ–¹æ³•\",\"items\":[{\"text\":\"ğŸ·ğŸ·ï¹’å­—ç¬¦ä¸²å’Œæ•°ç»„\",\"link\":\"/javascript/11-å­—ç¬¦ä¸²å’Œæ•°ç»„\"},{\"text\":\"ğŸ·ğŸ¸ï¹’è§£æ„èµ‹å€¼å’Œåºåˆ—åŒ–\",\"link\":\"/javascript/12-è§£æ„èµ‹å€¼å’Œåºåˆ—åŒ–\"},{\"text\":\"ğŸ·ğŸ¹ï¹’æ•°å­¦å’Œæ—¥æœŸå¯¹è±¡\",\"link\":\"/javascript/13-æ•°å­¦å’Œæ—¥æœŸå¯¹è±¡\"},{\"text\":\"ğŸ·ğŸºï¹’å¯¹è±¡æ–¹æ³•æ‰©å±•\",\"link\":\"/javascript/14-å¯¹è±¡æ–¹æ³•æ‰©å±•\"},{\"text\":\"ğŸ·ğŸ»ï¹’æ­£åˆ™å¯¹è±¡\",\"link\":\"/javascript/15-æ­£åˆ™å¯¹è±¡\"},{\"text\":\"ğŸ·ğŸ¼ï¹’é¢å‘å¯¹è±¡\",\"link\":\"/javascript/16-é¢å‘å¯¹è±¡\"}]},{\"text\":\"æ–°å¢è¯­æ³•è§„èŒƒ\",\"items\":[{\"text\":\"ğŸ·ğŸ½ï¹’æ–°å¢æ•°æ®ç±»å‹\",\"link\":\"/javascript/17-æ–°å¢æ•°æ®ç±»å‹\"},{\"text\":\"ğŸ·ğŸ¾ï¹’æè¿°ç¬¦å’Œä»£ç†ç±»\",\"link\":\"/javascript/18-æè¿°ç¬¦å’Œä»£ç†ç±»\"},{\"text\":\"ğŸ·ğŸ¿ï¹’TSä»¥åŠå®éªŒæ€§è¯­æ³•\",\"link\":\"/javascript/19-TSä»¥åŠå®éªŒæ€§è¯­æ³•\"},{\"text\":\"ğŸ¸ğŸ¶ï¹’æƒ°æ€§å‡½æ•°å’ŒPromise\",\"link\":\"/javascript/20-æƒ°æ€§å‡½æ•°å’ŒPromise\"},{\"text\":\"ğŸ¸ğŸ·ï¹’asyncå’Œawait\",\"link\":\"/javascript/21-asyncå’Œawait\"}]},{\"text\":\"ä½œä¸ºæµè§ˆå™¨è„šæœ¬\",\"items\":[{\"text\":\"ğŸ¸ğŸ¸ï¹’DOMå¯¹è±¡\",\"link\":\"/javascript/22-DOMå¯¹è±¡\"},{\"text\":\"ğŸ¸ğŸ¹ï¹’DOMäº‹ä»¶\",\"link\":\"/javascript/23-DOMäº‹ä»¶\"},{\"text\":\"ğŸ¸ğŸºï¹’BOMç›¸å…³\",\"link\":\"/javascript/24-BOMç›¸å…³\"},{\"text\":\"ğŸ¸ğŸ»ï¹’å¸¸ç”¨WebAPI\",\"link\":\"/javascript/25-å¸¸ç”¨WebAPI\"},{\"text\":\"ğŸ¸ğŸ¼ï¹’å‰åç«¯äº¤äº’\",\"link\":\"/javascript/26-å‰åç«¯äº¤äº’\"}]},{\"text\":\"ä½œä¸ºæœåŠ¡ç«¯è„šæœ¬\",\"items\":[{\"text\":\"ğŸ¸ğŸ½ï¹’nodejs\",\"link\":\"/javascript/27-nodejs\"},{\"text\":\"ğŸ¸ğŸ¾ï¹’mongodb\",\"link\":\"/javascript/28-mongodb\"},{\"text\":\"ğŸ¸ğŸ¿ï¹’Koa2\",\"link\":\"/javascript/29-Koa2\"},{\"text\":\"ğŸ¹ğŸ¶ï¹’æ„å»ºå·¥å…·\",\"link\":\"/javascript/30-æ„å»ºå·¥å…·\"},{\"text\":\"ğŸ¹ğŸ·ï¹’å®¢æˆ·ç«¯æ„å»º\",\"link\":\"/javascript/31-å®¢æˆ·ç«¯æ„å»º\"}]}],\"/python/\":[{\"text\":\"èµ·æ­¥\",\"items\":[{\"text\":\"ğŸ¶ï¹’å‡†å¤‡ç¯å¢ƒ\",\"link\":\"/python/\"},{\"text\":\"ğŸ·ï¹’åˆè¯†python\",\"link\":\"/python/1-åˆè¯†python\"},{\"text\":\"ğŸ¸ï¹’æµç¨‹æ§åˆ¶\",\"link\":\"/python/2-æµç¨‹æ§åˆ¶\"},{\"text\":\"ğŸ¹ï¹’å¼‚å¸¸å¤„ç†\",\"link\":\"/python/3-å¼‚å¸¸å¤„ç†\"}]},{\"text\":\"æ•°æ®ç±»å‹\",\"items\":[{\"text\":\"ğŸºï¹’æ•°å­—å’Œå­—ç¬¦ä¸²\",\"link\":\"/python/4-æ•°å­—å’Œå­—ç¬¦ä¸²\"},{\"text\":\"ğŸ»ï¹’åˆ—è¡¨å’Œå…ƒç»„\",\"link\":\"/python/5-åˆ—è¡¨å’Œå…ƒç»„\"},{\"text\":\"ğŸ¼ï¹’å­—å…¸å’Œé›†åˆ\",\"link\":\"/python/6-å­—å…¸å’Œé›†åˆ\"},{\"text\":\"ğŸ½ï¹’å­—ç¬¦ä¸²æ ¼å¼åŒ–\",\"link\":\"/python/7-å­—ç¬¦ä¸²æ ¼å¼åŒ–\"},{\"text\":\"ğŸ¾ï¹’ä¸‰ç›®å’Œæ¨å¯¼å¼\",\"link\":\"/python/8-ä¸‰ç›®å’Œæ¨å¯¼å¼\"},{\"text\":\"ğŸ¿ï¹’æ•°æ®ç±»å‹æ‹“å±•\",\"link\":\"/python/9-æ•°æ®ç±»å‹æ‹“å±•\"}]},{\"text\":\"å‡½æ•°\",\"items\":[{\"text\":\"ğŸ·ğŸ¶ï¹’æ–‡ä»¶å¤„ç†\",\"link\":\"/python/10-æ–‡ä»¶å¤„ç†\"},{\"text\":\"ğŸ·ğŸ·ï¹’æ—¥å¿—å¤„ç†\",\"link\":\"/python/11-æ—¥å¿—å¤„ç†\"},{\"text\":\"ğŸ·ğŸ¸ï¹’å†…ç½®å‡½æ•°\",\"link\":\"/python/12-å†…ç½®å‡½æ•°\"},{\"text\":\"ğŸ·ğŸ¹ï¹’é—­åŒ…å’Œè£…é¥°å™¨\",\"link\":\"/python/13-é—­åŒ…å’Œè£…é¥°å™¨\"},{\"text\":\"ğŸ·ğŸºï¹’é€’å½’å’Œæ·±æ‹·è´\",\"link\":\"/python/14-é€’å½’å’Œæ·±æ‹·è´\"},{\"text\":\"ğŸ·ğŸ»ï¹’è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\",\"link\":\"/python/15-è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\"}]},{\"text\":\"é¢å‘å¯¹è±¡\",\"items\":[{\"text\":\"ğŸ·ğŸ¼ï¹’ç±»å’Œå¯¹è±¡\",\"link\":\"/python/16-ç±»å’Œå¯¹è±¡\"},{\"text\":\"ğŸ·ğŸ½ï¹’å°è£…å’Œç»§æ‰¿\",\"link\":\"/python/17-å°è£…å’Œç»§æ‰¿\"},{\"text\":\"ğŸ·ğŸ¾ï¹’é­”æœ¯æ–¹æ³•\",\"link\":\"/python/18-é­”æœ¯æ–¹æ³•\"},{\"text\":\"ğŸ·ğŸ¿ï¹’å¤šæ€å’Œæ³›å‹\",\"link\":\"/python/19-å¤šæ€å’Œæ³›å‹\"},{\"text\":\"ğŸ¸ğŸ¶ï¹’æ¨¡å—å’ŒåŒ…\",\"link\":\"/python/20-æ¨¡å—å’ŒåŒ…\"}]},{\"text\":\"å¸¸ç”¨æ¨¡å—\",\"items\":[{\"text\":\"ğŸ¸ğŸ·ï¹’åŠ å¯†æœ‰å…³æ¨¡å—\",\"link\":\"/python/21-åŠ å¯†æœ‰å…³æ¨¡å—\"},{\"text\":\"ğŸ¸ğŸ¸ï¹’åºåˆ—åŒ–æœ‰å…³æ¨¡å—\",\"link\":\"/python/22-åºåˆ—åŒ–æœ‰å…³æ¨¡å—\"},{\"text\":\"ğŸ¸ğŸ¹ï¹’æ­£åˆ™æœ‰å…³æ¨¡å—\",\"link\":\"/python/23-æ­£åˆ™æœ‰å…³æ¨¡å—\"},{\"text\":\"ğŸ¸ğŸºï¹’æ—¶é—´æœ‰å…³æ¨¡å—\",\"link\":\"/python/24-æ—¶é—´æœ‰å…³æ¨¡å—\"},{\"text\":\"ğŸ¸ğŸ»ï¹’æ•°å­¦æœ‰å…³æ¨¡å—\",\"link\":\"/python/25-æ•°å­¦æœ‰å…³æ¨¡å—\"}]},{\"text\":\"å¹¶å‘ç¼–ç¨‹\",\"items\":[{\"text\":\"ğŸ¸ğŸ¼ï¹’ç³»ç»Ÿæœ‰å…³æ¨¡å—\",\"link\":\"/python/26-ç³»ç»Ÿæœ‰å…³æ¨¡å—\"},{\"text\":\"ğŸ¸ğŸ½ï¹’å¥—æ¥å­—socket\",\"link\":\"/python/27-å¥—æ¥å­—socket\"},{\"text\":\"ğŸ¸ğŸ¾ï¹’è¿›ç¨‹\",\"link\":\"/python/28-è¿›ç¨‹\"},{\"text\":\"ğŸ¸ğŸ¿ï¹’çº¿ç¨‹\",\"link\":\"/python/29-çº¿ç¨‹\"},{\"text\":\"ğŸ¹ğŸ¶ï¹’åç¨‹\",\"link\":\"/python/30-åç¨‹\"}]},{\"text\":\"WEBç›¸å…³\",\"items\":[{\"text\":\"ğŸ¹ğŸ·ï¹’SQLå’ŒORM\",\"link\":\"/python/31-SQLå’ŒORM\"},{\"text\":\"ğŸ¹ğŸ¸ï¹’FastAPI\",\"link\":\"/python/32-FastAPI\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>